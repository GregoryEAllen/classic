<HTML>
<!--This file created 9/10/99 6:07 PM by Claris Home Page version 3.0-->
<HEAD>
   <TITLE>BuildingGCC-m68k</TITLE>
   <META NAME=GENERATOR CONTENT="Claris Home Page 3.0">
   <X-CLARIS-WINDOW TOP=42 BOTTOM=748 LEFT=521 RIGHT=1051>
   <X-CLARIS-TAGVIEW MODE=minimal>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=x-mac-roman"><!--This file created 6/26/97 11:42 AM by Claris Home Page version 2.0-->
</HEAD>
<BODY>
<CENTER><FONT SIZE="+2"><B>Building GCC on Solaris for the
m68k-coff</B></FONT>

<P>

<HR>

</P>

<P><FONT SIZE="+2">Files to download:</FONT></P></CENTER>

<UL>
   <LI><FONT SIZE="+1">from </FONT><A HREF="http://www.cygnus.com"><FONT SIZE="+1">Cygnus</FONT></A>
   
   <UL>
      <LI>In <A HREF="ftp://ftp.cygnus.com/pub/embedded/crossgcc/">/pub/embedded/crossgcc</A>:
      
      <UL>
         <LI>The <A HREF="ftp://ftp.cygnus.com/pub/embedded/crossgcc/FAQ">crossgcc
         FAQ</A></LI>
         
         <LI>The <A HREF="ftp://ftp.cygnus.com/pub/embedded/crossgcc/crossgcc-gcc-2.8.1.patch">crossgcc-gcc-2.8.1.patch</A></LI>
         
         <LI>The <A HREF="ftp://ftp.cygnus.com/pub/embedded/crossgcc/one-tree-1.5.sh">one-tree-1.5.sh</A>
         shell script</LI>
      </UL>
      </LI>
      
      <LI>In <A HREF="ftp://ftp.cygnus.com/pub/newlib/">/pub/newlib</A>:
      
      <UL>
         <LI>The <A HREF="ftp://ftp.cygnus.com/pub/newlib/newlib-1.8.1.tar.gz">newlib-1.8.1</A>
         library</LI>
      </UL>
      </LI>
   </UL>
   </LI>
   
   <LI><FONT SIZE="+1">from your favorite </FONT><A HREF="http://www.gnu.org/order/ftp.html"><FONT SIZE="+1">GNU
   software mirror</FONT></A>
   
   <UL>
      <LI>In <A HREF="ftp://uiarchive.cso.uiuc.edu/pub/gnu/">/pub/gnu</A>:
      
      <UL>
         <LI>The GNU <A HREF="ftp://uiarchive.cso.uiuc.edu/pub/gnu/binutils-2.9.1.tar.gz">binutils-2.9.1</A>
         source</LI>
         
         <LI>The GNU <A HREF="ftp://uiarchive.cso.uiuc.edu/pub/gnu/gcc-2.8.1.tar.gz">gcc-2.8.1</A>
         compiler source</LI>
         
         <LI>The GNU <A HREF="ftp://uiarchive.cso.uiuc.edu/pub/gnu/libstdc++-2.8.1.1.tar.gz">libstdc++-2.8.1.1</A>
         C++ library source</LI>
      </UL>
      </LI>
   </UL>
   </LI>
   
   <LI>Put all of these files in one directory, say
   /home/gallen/gnu-m68k/</LI>
</UL>

<CENTER>

<HR>

<P><FONT SIZE="+2">Let's compile (</FONT><FONT SIZE="+1"><B>Follow
the FAQ!</B></FONT><FONT SIZE="+2">)</FONT></P></CENTER>

<BLOCKQUOTE>After gunzip-ing and untar-ing, apply the crossgcc patch:
   
   <BLOCKQUOTE><PRE>cd gcc-2.8.1
patch -p1 &lt;../crossgcc-gcc-2.8.1.patch
cd ..</PRE></BLOCKQUOTE>
   
   <P>Then run the one-tree script (from Cygnus):</P>
   
   <BLOCKQUOTE><PRE>chmod +x one-tree-1.5.sh
./one-tree-1.5.sh</PRE></BLOCKQUOTE>
   
   <P>Now compile and install binutils, gcc, and newlib:</P>
   
   <BLOCKQUOTE><PRE>host=sparc-sun-solaris2.6
target=m68k-coff
prefix=/opt/depot/m68k-coff-gcc-2.8.1
mkdir build
cd build
CC=gcc ../src/configure --host=$host --target=$target --prefix=$prefix
make all info CC=gcc
make install install-info
cd ..</PRE></BLOCKQUOTE>
   
   <P>Note that we're running the bash shell.</P></BLOCKQUOTE>

<CENTER>

<HR>

<P><FONT SIZE="+2">Now what?</FONT></P>

<P>The cross compiler and libraries are at the path $prefix.</P>

<P>Add $prefix/bin to your path, and you can access the compiler (and
other tools) as:</P></CENTER>

<PRE><CENTER>m68k-coff-gcc
m68k-coff-as
m68k-coff-ar
m68k-coff-ld
m68k-coff-objdump
m68k-coff-objcopy
(etc...)</CENTER></PRE>

<CENTER>An excellent site for <A HREF="http://www.delorie.com/gnu/docs/">HTML
Gnu Docs</A> is at <A HREF="http://www.delorie.com/">Delorie</A>.

<P>Since I am targetting an MC68332, I have to be sure and add the
options</P></CENTER>

<PRE><CENTER>-mc68000 -msoft-float -Wa,-mcpu32</CENTER></PRE>

<CENTER>to the m68k-coff-gcc command-line, to let it know which
processor to compile for, and which libraries to link in.

<P>The compiler will never generate any special CPU32 instructions,
so you have to embed assembly in your C functions (or write in
assembly) to use them. The last option up there tells the assembler
that it can use the CPU32 instruction set. (Without it, you'll get
assembly-time errors.)</P>

<P>

<HR>

</P>

<P>For more information contact: <A HREF="http://www.ece.utexas.edu/~allen/">Greg
Allen</A> <A HREF="mailto:gallen@arlut.utexas.edu">&lt;gallen@arlut.utexas.edu&gt;</A></P>

<P>&nbsp;$Id: BuildingGCC-m68k.html,v 1.1 1999/09/10 23:07:45 gallen Exp $</P></CENTER>
</BODY>
</HTML>
